<!--
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
-->

<div  style="border-bottom: 0 none">
    <input class="dashboard-search-box" #gb type="text" pInputText size="50" placeholder="&#xf002;   Search connection metadata">
</div>

<div style="display: flex; flex-flow: row wrap; height: calc(100% - 210px); overflow: auto">
<div style="order: 1; width: calc(100% - 138px); overflow: auto" >
    <p-dataTable [value]="objectMetadata" [globalFilter]="gb" #dt selectionMode="single"
                 [(selection)]="selectedObject" [tableStyle]="{'overflow': 'auto'}" emptyMessage="No records found">
        <p-column header="Type" field="metadata.metadataTypeName" hidden="true"></p-column>
        <p-column header="Schema" field="metadata.schema" hidden="true"></p-column>
        <p-column header="" field="metadata.name">
            <template let-col let-dataitem="rowData" pTemplate="body">
                <span style="display: flex; flex-flow: row">
                    <span style="order: 1; padding-right: 2px">
                        <div *ngIf="isTable(dataitem.metadata.metadataType)">
                            <i class="fa fa-table fa-lg" style="color: gold; padding: 4px"></i>
                        </div>
                        <div *ngIf="isProcedure(dataitem.metadata.metadataType)">
                            <i class="fa fa-wrench fa-lg" style="color: gold; padding: 4px"></i>
                        </div>
                        <div *ngIf="isView(dataitem.metadata.metadataType)">
                            <i class="fa fa-binoculars fa-lg" style="color: gold; padding: 4px"></i>
                        </div>
                    </span>
                    <span style="order: 2">
                        <span class="dashboard-button-content">
                            {{dataitem.metadata.schema}}.{{dataitem.metadata.name}} <br />
                            {{dataitem.metadata.metadataTypeName}}
                        </span>
                    </span>
                </span>
            </template>
        </p-column>
    </p-dataTable>
</div>

<div style="order: 2;width: 133px; vertical-align: top">
    <div *ngIf="isBrowseEnabled()" >
        <button pButton class="dashboard-button"
                style="background: #0E639C; color: #ffffff; width: 125px; margin: 3px; text-align: left; border-width: 0px; height:34px"
                type="button" [routerLink]="['/object-dashboard']" label=" " >
            <div style="vertical-align: middle">
                <span class="dashboard-button-content">
                    <i class="fa fa-search fa-lg" style="color: gold; padding-left: 4px; padding-right: 3px"></i>
                    Browse
                </span>
            </div>
        </button>
    </div>
    <div *ngIf="isExecuteEnabled()" >
        <button pButton class="dashboard-button"
                style="background: #0E639C; color: #ffffff; width: 125px; margin: 3px; text-align: left; border-width: 0px"
                type="button" (click)="executeProcedure()" label=" " >
            <div style="vertical-align: middle">
                <img class="dashboard-button-content" src="{{databaseIcon}}" />
                <span class="dashboard-button-content">
                    Execute
                </span>
            </div>
        </button>
    </div>
    <div *ngIf="selectedObject" >
        <div *ngIf="isExecuteEnabled()===false">
            <button pButton class="dashboard-button"
                    style="background: #0E639C; color: #ffffff; width: 125px; margin: 3px; text-align: left; border-width: 0px"
                    type="button" (click)="scriptSelect()" label=" " >
                <div style="vertical-align: middle">
                    <img class="dashboard-button-content" src="{{databaseIcon}}" />
                    <span class="dashboard-button-content">
                        Select Top 100
                    </span>
                </div>
            </button>
        </div>
    </div>
    <div *ngIf="selectedObject" >
        <div *ngIf="isExecuteEnabled()===false">
            <button *ngIf="selectedObject" pButton class="dashboard-button"
                    style="background: #0E639C; color: #ffffff; width: 125px; margin: 3px; text-align: left; border-width: 0px; height:34px"
                (click)="editData()" label=" ">
              <div style="vertical-align: middle">
                  <span class="dashboard-button-content">
                      <i class="fa fa-pencil-square-o fa-lg" style="color: gold; padding-left: 4px; padding-right: 3px"></i>
                      Edit Data
                  </span>
              </div>
            </button>
        </div>
    </div>
    <div *ngIf="selectedObject" >
        <button *ngIf="selectedObject" pButton class="dashboard-button"
                style="background: #0E639C; color: #ffffff; width: 125px; margin: 3px; text-align: left; border-width: 0px; height:34px"
                (click)="scriptCreate()" label=" ">
            <div style="vertical-align: middle">
                <span class="dashboard-button-content">
                     <i class="fa fa-file-code-o fa-lg" style="color: gold; padding-left: 4px; padding-right: 3px"></i>
                    Script Create
                </span>
            </div>
        </button>
    </div>
</div>
</div>
